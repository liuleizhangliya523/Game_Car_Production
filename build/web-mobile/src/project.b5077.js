require=function r(i,c,l){function s(t,e){if(!c[t]){if(!i[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var n=c[t]={exports:{}};i[t][0].call(n.exports,function(e){return s(i[t][1][e]||e)},n,n.exports,r,i,c,l)}return c[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({ConstData:[function(e,t,a){"use strict";cc._RF.push(t,"f283c89VgZKCLKtCk52XF5e","ConstData"),Object.defineProperty(a,"__esModule",{value:!0});var n={DEBUG:!1};n.DEBUG?n.URL="http://tdev.juxinbox.com/trump_investment/":n.URL="https://game.juxinbox.com/trump_investment/",n.PAY_CASE_DATA=[],n.PAY_CASE_DATA[0]=10,n.PAY_CASE_DATA[1]=100,n.PAY_CASE_DATA[2]=500,n.PAY_CASE=0,n.CAR_NAME=[{key:"car1",name:"宝玛"},{key:"car2",name:"本填"},{key:"car3",name:"别客"},{key:"car4",name:"澳迪"},{key:"car5",name:"奔瓷"},{key:"car6",name:"彪志"},{key:"car7",name:"伏特"},{key:"car8",name:"宝俊"},{key:"car9",name:"启瑞"},{key:"car10",name:"陆虎"},{key:"car11",name:"铃目"},{key:"car12",name:"山菱"},{key:"save",name:"保护基金"},{key:"carMarket",name:"轿车"},{key:"suvMarket",name:"SUV"},{key:"manualCar",name:"手动型"},{key:"autoCar",name:"自动型"},{key:"manualSuv",name:"手动型"},{key:"autoSuv",name:"自动型"}],n.getCarNameByKey=function(t){var e=n.CAR_NAME.find(function(e){return e.key===t});return null!=e?e.name:""},n.getCarNameByIndex=function(a){var e=n.CAR_NAME.find(function(e,t){return t===a});return null!=e?e.name:""},n.getCarKeyByIndex=function(a){var e=n.CAR_NAME.find(function(e,t){return t===a});return null!=e?e.key:""},n.getCarIndexByKey=function(a){var o=-1;return n.CAR_NAME.find(function(e,t){return a===e.key&&(o=t,!0)}),o},a.default=n,t.exports=a.default,cc._RF.pop()},{}],GlobalGameData:[function(e,t,a){"use strict";cc._RF.push(t,"d61b88pNxJD8pg4CfgfbxIe","GlobalGameData"),Object.defineProperty(a,"__esModule",{value:!0});var o={openID:"",oli_var:0,locked_oli_var:0,headImgUrl:"",timer:3e4,gameState:0,used_oli_var:0,used_locked_oli_var:0,amount_of_cars:{car1:0,car2:0,car3:0,car4:0,car5:0,car6:0,car7:0,car8:0,car9:0,car10:0,car11:0,car12:0,carMarket:0,suvMarket:0,manualCar:0,autoCar:0,manualSuv:0,autoSuv:0,save:0},amount_of_cars_others:{car1:0,car2:0,car3:0,car4:0,car5:0,car6:0,car7:0,car8:0,car9:0,car10:0,car11:0,car12:0,carMarket:0,suvMarket:0,manualCar:0,autoCar:0,manualSuv:0,autoSuv:0,save:0},game_notice_text:"",game_notice_time_stamp:"",clearMyAmountData:function(){for(var e in o.amount_of_cars)o.amount_of_cars.hasOwnProperty(e)&&(o.amount_of_cars[e]=0)},clearOthersAmountData:function(){for(var e in o.amount_of_cars_others)o.amount_of_cars_others.hasOwnProperty(e)&&(o.amount_of_cars_others[e]=0)}};a.default=o,t.exports=a.default,cc._RF.pop()},{}],Tools:[function(e,t,a){"use strict";cc._RF.push(t,"85047k/bHRLVIs6qMfTepCI","Tools"),Object.defineProperty(a,"__esModule",{value:!0});var o,n=e("./../data/ConstData"),i=(o=n)&&o.__esModule?o:{default:o};var u={rand:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},getRandArray:function(e,t,a){for(var o=[],n=[],r=0,i=e;i<=t;i++)o[r]=i,r++;for(var c=0;c<a;c++){var l=u.rand(0,t-c)+c,s=o[c];o[c]=o[l],o[l]=s,n[c]=o[c]}return n},sendHttpRequest:function(e,t,a,o){var n=cc.loader.getXMLHttpRequest(),r=i.default.URL+t;if(null!=n){n.onreadystatechange=function(){if(console.log("readyState: "+n.readyState+" status: "+n.status),4==n.readyState&&200<=n.status&&n.status<400){var e=n.response;if(console.log(e),null!=o){var t=JSON.parse(e);if("string"==typeof t&&(t=JSON.parse(t)),1==t.code)if("停服"===t.msg)Tips_2.show("Notice","Server disconnected",0);else{var a=t.data;t.data||(a=t.resultObject),o(null,a)}else o(t.msg,t.data)}}},n.open(e,r,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),console.log("Send params  : "+a),n.send(a)}}};a.default=u,t.exports=a.default,cc._RF.pop()},{"./../data/ConstData":"ConstData"}],activity:[function(e,t,a){"use strict";cc._RF.push(t,"8026eatMsRPUJANzKelPv7o","activity");var n=i(e("./data/ConstData")),o=i(e("./data/GlobalGameData")),r=i(e("./tools/Tools"));function i(e){return e&&e.__esModule?e:{default:e}}var c=[cc.color(133,179,255,255),cc.color(255,214,90,255)];cc.Class({extends:cc.Component,properties:{lb_btn1:{default:null,type:cc.Label},lb_btn2:{default:null,type:cc.Label},sp_head_arr_node1:{default:[],type:[cc.Sprite]},lb_name_arr_node1:{default:[],type:[cc.Label]},lb_oli_arr_node1:{default:[],type:[cc.Label]},sp_head_arr_node2:{default:[],type:[cc.Sprite]},lb_name_arr_node2:{default:[],type:[cc.Label]},lb_oli_arr_node2:{default:[],type:[cc.Label]},node_1:{default:null,type:cc.Node},node_2:{default:null,type:cc.Node},lb_getting_data:{default:null,type:cc.Label},lb_my_lost:{default:null,type:cc.Label},lb_my_win:{default:null,type:cc.Label},lb_activity_date:{default:null,type:cc.Label}},ctor:function(){this.tabIndex=0,this.isGetData=!0},start:function(){this.updateTab();var I=this,e="openId="+o.default.openID;r.default.sendHttpRequest("POST","game/getFestival",e,function(e,t){if(e)cc.log("http request error: "+e);else{var a=decodeURI(t.lostNickName1),o=t.lostHeadImgUrl1,n=t.lostAllLost1;void 0!==a&&void 0!==o&&void 0!==n&&(I.lb_name_arr_node2[0].string=a,I.loadHeadImage(o,I.sp_head_arr_node2[0]),I.lb_oli_arr_node2[0].string=n+"油滴");var r=decodeURI(t.lostNickName2),i=t.lostHeadImgUrl2,c=t.lostAllLost2;void 0!==r&&void 0!==i&&void 0!==c&&(I.lb_name_arr_node2[1].string=r,I.loadHeadImage(i,I.sp_head_arr_node2[1]),I.lb_oli_arr_node2[1].string=c+"油滴");var l=decodeURI(t.lostNickName3),s=t.lostHeadImgUrl3,u=t.lostAllLost3;void 0!==l&&void 0!==s&&void 0!==u&&(I.lb_name_arr_node2[2].string=l,I.loadHeadImage(s,I.sp_head_arr_node2[2]),I.lb_oli_arr_node2[2].string=u+"油滴");var d=t.myAllLost;void 0!==d&&(I.lb_my_lost.string=d);var _=decodeURI(t.winNickName1),f=t.winHeadImgUrl1,p=t.winWinMax1;void 0!==_&&void 0!==f&&void 0!==p&&(I.lb_name_arr_node1[0].string=_,I.loadHeadImage(f,I.sp_head_arr_node1[0]),I.lb_oli_arr_node1[0].string=p+"油滴");var m=decodeURI(t.winNickName2),h=t.winHeadImgUrl2,g=t.winWinMax2;void 0!==m&&void 0!==h&&void 0!==g&&(I.lb_name_arr_node1[1].string=m,I.loadHeadImage(h,I.sp_head_arr_node1[1]),I.lb_oli_arr_node1[1].string=g+"油滴");var v=decodeURI(t.winNickName3),y=t.winHeadImgUrl3,b=t.winWinMax3;void 0!==v&&void 0!==y&&void 0!==b&&(I.lb_name_arr_node1[2].string=v,I.loadHeadImage(y,I.sp_head_arr_node1[2]),I.lb_oli_arr_node1[2].string=b+"油滴");var C=decodeURI(t.winNickName4),A=t.winHeadImgUrl4,S=t.winWinMax4;void 0!==C&&void 0!==A&&void 0!==S&&(I.lb_name_arr_node1[3].string=C,I.loadHeadImage(A,I.sp_head_arr_node1[3]),I.lb_oli_arr_node1[3].string=S+"油滴");var k=decodeURI(t.winNickName5),F=t.winHeadImgUrl5,x=t.winWinMax5;void 0!==k&&void 0!==F&&void 0!==x&&(I.lb_name_arr_node1[4].string=k,I.loadHeadImage(F,I.sp_head_arr_node1[4]),I.lb_oli_arr_node1[4].string=x+"油滴");var T=t.myMaxWin;void 0!==T&&(I.lb_my_win.string=T);var w=t.isFestival;I.lb_activity_date.string=void 0===w||0==w?"本次活动已结束":"活动时间 2018.8.3--8.7",I.updateTab()}})},loadHeadImage:function(e,o){cc.loader.load({url:n.default.URL+"login/getPic?u="+e,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}})},updateContent:function(){if(this.isGetData)switch(this.tabIndex){case 0:this.node_1.active=!0,this.node_2.active=!1;break;case 1:this.node_1.active=!1,this.node_2.active=!0}},updateTab:function(){switch(this.lb_btn1.node.color=c[0],this.lb_btn2.node.color=c[0],this.tabIndex){case 0:this.lb_btn1.node.color=c[1],this.updateContent();break;case 1:this.lb_btn2.node.color=c[1],this.updateContent()}},btnClickedCallBack:function(e,t){switch(t){case"back":cc.director.loadScene("game");break;case"tab1":this.tabIndex=0,this.updateTab();break;case"tab2":this.tabIndex=1,this.updateTab()}}}),cc._RF.pop()},{"./data/ConstData":"ConstData","./data/GlobalGameData":"GlobalGameData","./tools/Tools":"Tools"}],car_btn:[function(e,t,a){"use strict";cc._RF.push(t,"3c4236ujH1DIJs7tr5RjsLA","car_btn");var r=n(e("./data/ConstData")),i=n(e("./data/GlobalGameData")),o=n(e("./tools/Tools"));function n(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:function(){return{}},start:function(){this.updateAmount("0","0");var e=cc.find("Canvas");this._gameObj=e.getComponent("game")},doPayOperation:function(){var e=100*o.default.rand(1,12),t=this.node.name;i.default.amount_of_cars_others[t]+=e,cc.find("node_bets",this.node).active=!0,this.updateAmount(i.default.amount_of_cars[t],i.default.amount_of_cars_others[t])},updateAmount:function(e,t){this.lb_my=cc.find("node_bets/label_my",this.node),this.lb_total=cc.find("node_bets/label_total",this.node),null!=e&&(this.lb_total.getComponent(cc.Label).string=e.toString()),null!=t&&(this.lb_my.getComponent(cc.Label).string=t.toString())},playArrowAnim:function(e){var t=this;this.sp_last_result_flag=cc.find("last_result_flag",this.node),this.sp_last_result_flag.active=!0,this.sp_last_result_flag.runAction(cc.sequence(cc.blink(1.5,3),cc.delayTime(1),cc.callFunc(function(){t.sp_last_result_flag.active=!1,null!=e&&e()},this)))},btn_clickedCallBack:function(e,t){var a=e.target,o=cc.find("node_bets",a);console.log("投注："+t+" 当前金额："+r.default.PAY_CASE_DATA[r.default.PAY_CASE]);var n=i.default.locked_oli_var+i.default.oli_var;if(this._gameObj.playBtnSound(),n<r.default.PAY_CASE_DATA[r.default.PAY_CASE])Tips.show("您的余额不足\n请充值后继续参与","点击充值>>","https://prodone.juxinbox.com/sinopecGameCt/weixinMng/ManageC/chargeOilIn.htm?back_url=https://game.juxinbox.com/trump_investment/login/authorize");else{if(0<i.default.oli_var)if(i.default.oli_var>=r.default.PAY_CASE_DATA[r.default.PAY_CASE]){if(1e4<i.default.used_oli_var+r.default.PAY_CASE_DATA[r.default.PAY_CASE])return void Tips.show("为了您的资金安全，单次投注最大上限不得超过10000。","确定","");i.default.oli_var-=r.default.PAY_CASE_DATA[r.default.PAY_CASE],i.default.used_oli_var+=r.default.PAY_CASE_DATA[r.default.PAY_CASE],this._gameObj.updateOliLabel({oli:i.default.oli_var,locked_oli:i.default.locked_oli_var})}else{if(1e4<i.default.used_oli_var+i.default.used_locked_oli_var+r.default.PAY_CASE_DATA[r.default.PAY_CASE])return void Tips.show("为了您的资金安全，单次投注最大上限不得超过10000。","确定","");i.default.used_oli_var+=i.default.oli_var,i.default.oli_var-=r.default.PAY_CASE_DATA[r.default.PAY_CASE],i.default.locked_oli_var+=i.default.oli_var,i.default.used_locked_oli_var-=i.default.oli_var,i.default.oli_var<0&&(i.default.oli_var=0),this._gameObj.updateOliLabel({oli:i.default.oli_var,locked_oli:i.default.locked_oli_var})}else{if(1e4<i.default.used_locked_oli_var+r.default.PAY_CASE_DATA[r.default.PAY_CASE])return void Tips.show("为了您的资金安全，单次投注最大上限不得超过10000。","确定","");i.default.locked_oli_var-=r.default.PAY_CASE_DATA[r.default.PAY_CASE],i.default.used_locked_oli_var+=r.default.PAY_CASE_DATA[r.default.PAY_CASE],this._gameObj.updateOliLabel({oli:i.default.oli_var,locked_oli:i.default.locked_oli_var})}o.active=!0,i.default.amount_of_cars[t]+=r.default.PAY_CASE_DATA[r.default.PAY_CASE],this.updateAmount(i.default.amount_of_cars[t],i.default.amount_of_cars_others[t]),cc.log("已经消耗的U币： "+i.default.used_locked_oli_var),cc.log("已经消耗的油滴： "+i.default.used_oli_var)}}}),cc._RF.pop()},{"./data/ConstData":"ConstData","./data/GlobalGameData":"GlobalGameData","./tools/Tools":"Tools"}],gameTips:[function(e,t,a){"use strict";var o;function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}cc._RF.push(t,"d931dJmcnREta+XbnVc9mRR","gameTips"),cc.Class({extends:cc.Component,properties:(o={spf_waiting:{type:cc.SpriteFrame,default:null},spf_ready:{type:cc.SpriteFrame,default:null}},n(o,"spf_waiting",{type:cc.SpriteFrame,default:null}),n(o,"sp_icon",{type:cc.Sprite,default:null}),n(o,"lb_desc",{type:cc.RichText,default:null}),n(o,"lb_title",{type:cc.RichText,default:null}),n(o,"sp_bg",{type:cc.Sprite,default:null}),n(o,"sp_bg_inner",{type:cc.Sprite,default:null}),n(o,"layout_mask",{type:cc.Layout,default:null}),n(o,"sp_title_bg",{type:cc.Sprite,default:null}),o),ctor:function(){this.lbCountDownCallFunc=null},start:function(){},setIcon:function(e){0===e?this.sp_icon.spriteFrame=this.spf_waiting:1===e&&(this.sp_icon.spriteFrame=this.spf_ready)},setTitle:function(e){var t="<b>"+e+"</b>";this.lb_title.string=t},setText:function(e){this.lb_desc.string=e},setVisibleUI:function(e){e?(this.sp_bg.node.active=!0,this.sp_bg_inner.node.active=!0,this.layout_mask.node.active=!0,this.lb_title.node.active=!0,this.lb_desc.node.active=!0,this.sp_icon.node.active=!0,this.sp_title_bg.node.active=!0):(this.sp_bg.node.active=!1,this.sp_bg_inner.node.active=!1,this.layout_mask.node.active=!1,this.lb_title.node.active=!1,this.lb_desc.node.active=!1,this.sp_icon.node.active=!1,this.sp_title_bg.node.active=!1)},startLabelCountDown:function(e){this.lbCountDownCallFunc=e,this.lbCountDownCallFunc&&this.lb_desc.schedule(this.lbCountDownCallFunc,0)},stopLabelCountDown:function(){this.lb_desc.unschedule(this.lbCountDownCallFunc),this.lbCountDownCallFunc=null}}),cc._RF.pop()},{}],game:[function(e,t,a){"use strict";cc._RF.push(t,"c8ecduYmsxPHYa5mCilBdPM","game");var y=o(e("./data/ConstData")),b=o(e("./data/GlobalGameData")),l=o(e("./tools/Tools"));function o(e){return e&&e.__esModule?e:{default:e}}var n=cc.Class({extends:cc.Component,properties:function(){return{lb_normal_oli:{default:null,type:cc.Label},lb_lock_oli:{default:null,type:cc.Label},btn_pay_case1:{default:null,type:cc.Button},btn_pay_case2:{default:null,type:cc.Button},btn_pay_case3:{default:null,type:cc.Button},btn_arr:{default:null,type:cc.Node},music_bgm:{type:cc.AudioSource,default:null},music_btn:{type:cc.AudioSource,default:null},music_ani_1:{type:cc.AudioSource,default:null},music_ani_2:{type:cc.AudioSource,default:null},music_last_target:{type:cc.AudioSource,default:null},progressBar_timer:{type:cc.ProgressBar,default:null},lb_left_time:{type:cc.Label,default:null},layout_result:{type:cc.Layout,default:null},spriteFrame_car1:{default:null,type:cc.SpriteFrame},spriteFrame_car2:{default:null,type:cc.SpriteFrame},spriteFrame_car3:{default:null,type:cc.SpriteFrame},spriteFrame_car4:{default:null,type:cc.SpriteFrame},spriteFrame_car5:{default:null,type:cc.SpriteFrame},spriteFrame_car6:{default:null,type:cc.SpriteFrame},spriteFrame_car7:{default:null,type:cc.SpriteFrame},spriteFrame_car8:{default:null,type:cc.SpriteFrame},spriteFrame_car9:{default:null,type:cc.SpriteFrame},spriteFrame_car10:{default:null,type:cc.SpriteFrame},spriteFrame_car11:{default:null,type:cc.SpriteFrame},spriteFrame_car12:{default:null,type:cc.SpriteFrame},spriteFrame_car13:{default:null,type:cc.SpriteFrame},sp_head_image_list:{default:[],type:[cc.Sprite]},node_moreBtnPanel:{default:null,type:cc.Node},rich_text_bounds:{default:null,type:cc.RichText}}},ctor:function(){this.n_left_timer=30,this.n_progress_var=0,this.b_start_update_progress=!1,this.car_image_spf_arr=[],this.isHelpPrefabLoading=!1,this.intervNumber=0,this.tmpOliNum=0},onLoad:function(){},startAni:function(l,s){var u=this;this.music_ani_1.play();var d=cc.find("image",this.layout_result.node),_=cc.find("imageEffect",this.layout_result.node),f=cc.find("desc",this.layout_result.node),p=cc.find("ptc",this.layout_result.node),m=cc.find("flag",this.layout_result.node),h=cc.find("flag/flag_text",this.layout_result.node);f.getComponent(cc.RichText).string="请等待投资结果",_.active=!1,p.active=!1,m.active=!1;var g=0,v=0;this.layout_result.schedule(function e(){if(d.getComponent(cc.Sprite).spriteFrame=u.car_image_spf_arr[g],12<++g&&(g=0),2.4<=(v+=.1)){u.layout_result.unschedule(e),u.music_ani_2.play();var n=y.default.getCarIndexByKey(l);d.getComponent(cc.Sprite).spriteFrame=u.car_image_spf_arr[n];var t=y.default.getCarNameByIndex(n),r=5<n?14:13,i=void 0;i=n<=5?n<=2?15:16:n<=8?17:18;var a=y.default.getCarNameByIndex(r),o=t+"（"+y.default.getCarNameByIndex(i)+a+"）";12==n&&(o=t),f.getComponent(cc.RichText).string=s?"恭喜您\n投资的车型大卖":"很遗憾\n您本轮没有投资大卖车辆",h.getComponent(cc.RichText).string="<outline color=#b12315 width=2><color=#ffed88><b>"+o+"</b></color></outline>",_.active=!0,p.active=!0,m.active=!0;var c=cc.repeatForever(cc.rotateBy(.2,10,10));_.runAction(c),u.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){s&&u.runOliLabelAni(),b.default.clearOthersAmountData(),u.clearBuyData(),Tips_2.show("准备投资","请选择您的投资项目",1,!0),u.layout_result.node.active=!1;var e=u.btn_arr.children;for(var t in e)if(e.hasOwnProperty(t)){var a=e[t].getComponent("car_btn"),o=e[t].name;if(o==y.default.getCarKeyByIndex(n)){u.music_last_target.play(),a.playArrowAnim(function(){cc.log("投标动画播完了"),Tips_2.showUI(1.5,function(){cc.log("走下一轮逻辑"),b.default.used_oli_var=0,b.default.used_locked_oli_var=0,u.sendQureyStateRequest(),u.sendGetBoundsInfo()})});continue}if(o==y.default.getCarKeyByIndex(r)&&12!=n){a.playArrowAnim(null);continue}if(o==y.default.getCarKeyByIndex(i)&&12!=n){a.playArrowAnim(null);continue}}},u)))}},.1)},timer:function(e){this.n_left_timer-=e;var t=Math.ceil(this.n_left_timer),a=void 0,o=this;function n(e){o.isRunOthersPay[e]&&(a=l.default.getRandArray(0,18,7),console.log("模拟别人下注 "+e),o.startAllOthersPay(a),o.isRunOthersPay[e]=!1)}switch(t){case 24:n(3);break;case 18:n(2);break;case 12:n(1);break;case 6:n(0)}this.n_left_timer<=0&&(this.n_left_timer=0,this.timerController(!1),Tips.off(),Tips_2.show("时间已到","请等待投资结果...",0),this.scheduleOnce(function(){var e="openId="+b.default.openID,t="openId="+b.default.openID,a=!1;for(var o in b.default.amount_of_cars)b.default.amount_of_cars.hasOwnProperty(o)&&(e+="&"+o+"="+b.default.amount_of_cars[o],0!=b.default.amount_of_cars[o]&&(a=!0));var n="";n=a?e+="&isInvest=1":t+="&isInvest=0",console.log(n);var r=this;l.default.sendHttpRequest("POST","invest/dealInvest",n,function(e,t){if(e)cc.log("http request error: "+e),r.onDropBtnClicked(),b.default.clearOthersAmountData(),r.sendQureyStateRequest();else{Tips_2.off(),r.layout_result.node.active=!0;var a=t.newUCoin>b.default.locked_oli_var;if(r.startAni(t.winCar,a),a){var o=t.newUCoin-b.default.locked_oli_var;console.log("赢了"+o+"油"),r.intervNumber=o/20,r.tmpOliNum=Number(r.lb_lock_oli.string)}b.default.locked_oli_var=Number(t.newUCoin)}})},1)),this.updateLeftTimeLable()},timerController:function(e){e?(this.n_left_timer=b.default.timer/1e3,this.n_progress_var=3e4-b.default.timer,this.isRunOthersPay=[!0,!0,!0,!0],this.updateLeftTimeLable(),this.schedule(this.timer,0)):(this.isRunOthersPay=[!1,!1,!1,!1],this.unschedule(this.timer)),this.b_start_update_progress=e},playBtnSound:function(){this.music_btn.play()},updateLeftTimeLable:function(){this.lb_left_time.string=Math.ceil(this.n_left_timer).toString()},updateOliLabel:function(e){null!=this&&(this.lb_normal_oli.string=e.oli.toString(),this.lb_lock_oli.string=e.locked_oli.toString())},oliLabelAniScheduler:function(){this.tmpOliNum+=this.intervNumber,this.lb_lock_oli.string=Math.round(this.tmpOliNum).toString()},runOliLabelAni:function(){this.schedule(this.oliLabelAniScheduler,.1,19);var e=cc.repeat(cc.sequence(cc.scaleTo(.2,1.05),cc.scaleTo(.3,1),cc.scaleTo(.2,1.05),cc.scaleTo(.3,1)),2);this.lb_lock_oli.node.runAction(e)},updatePayCaseBtn:function(){for(var e in this.btn_pay_array)if(this.btn_pay_array.hasOwnProperty(e)){var t=this.btn_pay_array[e];if(Number(e)===y.default.PAY_CASE){var a=cc.find("label_cost",t.node);t.node.color=cc.hexToColor("#FFFFFF"),a.color=cc.hexToColor("#FFFFFF")}else{var o=cc.find("label_cost",t.node);t.node.color=cc.hexToColor("#8C8282"),o.color=cc.hexToColor("#8C8282")}}},initData:function(){y.default.PAY_CASE=0,this.clearBuyData()},initUI:function(){this.updateOliLabel({oli:b.default.oli_var,locked_oli:b.default.locked_oli_var}),this.updatePayCaseBtn(),this.updateLeftTimeLable(),this.lb_left_time.string="??",this.car_image_spf_arr.push(this.spriteFrame_car1),this.car_image_spf_arr.push(this.spriteFrame_car2),this.car_image_spf_arr.push(this.spriteFrame_car3),this.car_image_spf_arr.push(this.spriteFrame_car4),this.car_image_spf_arr.push(this.spriteFrame_car5),this.car_image_spf_arr.push(this.spriteFrame_car6),this.car_image_spf_arr.push(this.spriteFrame_car7),this.car_image_spf_arr.push(this.spriteFrame_car8),this.car_image_spf_arr.push(this.spriteFrame_car9),this.car_image_spf_arr.push(this.spriteFrame_car10),this.car_image_spf_arr.push(this.spriteFrame_car11),this.car_image_spf_arr.push(this.spriteFrame_car12),this.car_image_spf_arr.push(this.spriteFrame_car13)},startAllOthersPay:function(e){for(var t=this.btn_arr.children,a=0;a<e.length;a++){t[e[a]].getComponent("car_btn").doPayOperation()}},stopAllOthersPay:function(){},clearBuyData:function(){b.default.clearMyAmountData();var e=this.btn_arr.children;for(var t in e)if(e.hasOwnProperty(t)){var a=e[t].getComponent("car_btn"),o=e[t].name;if(0!=b.default.amount_of_cars_others[o]){a.updateAmount("0",null);continue}cc.find("node_bets",e[t]).active=!1}},sendQureyStateRequest:function(){var e="openId="+b.default.openID,a=this;l.default.sendHttpRequest("POST","game/findGameAndUser",e,function(e,t){e?cc.log("http request error: "+e):(Tips_2.off(),b.default.timer=t.nextTime,b.default.gameState="yes"===t.isOpen?0:1,0==b.default.gameState?(a.updateHeadImage(b.default.headImgUrl),a.timerController(!0)):(a.timerController(!1),a.lb_left_time.string="??",a.progressBar_timer.progress=1,Tips_2.scheduleShow("正在结算","上轮投资结算中 请稍后...",0,b.default.timer,function(){a.sendQureyStateRequest()})))})},start:function(){this.music_bgm.loop=!0,this.music_bgm.play(),this.btn_pay_array=[],this.btn_pay_array.push(this.btn_pay_case1),this.btn_pay_array.push(this.btn_pay_case2),this.btn_pay_array.push(this.btn_pay_case3),this.initData(),this.initUI(),this.sendQureyStateRequest()},onPayCaseBtnClicked:function(e,t){switch(this.playBtnSound(),t){case"1":y.default.PAY_CASE=0;break;case"2":y.default.PAY_CASE=1;break;case"3":y.default.PAY_CASE=2}cc.info("当前选中档位："+y.default.PAY_CASE_DATA[y.default.PAY_CASE]),this.updatePayCaseBtn()},onDropBtnClicked:function(e,t){cc.info("撤资按钮"),this.playBtnSound(),this.clearBuyData(),b.default.oli_var+=b.default.used_oli_var,b.default.locked_oli_var+=b.default.used_locked_oli_var,b.default.used_oli_var=b.default.used_locked_oli_var=0,this.updateOliLabel({oli:b.default.oli_var,locked_oli:b.default.locked_oli_var})},onOtherBtnClicked:function(e,t){this.playBtnSound();var a="";switch(console.log("customEventData : "+t),t){case"help":return cc.info("帮助按钮"),this.onDropBtnClicked(),void cc.director.loadScene("help");case"record":cc.info("走势图按钮"),a="record_layout";break;case"activity":return this.onDropBtnClicked(),void cc.director.loadScene("activity");case"more":return void(this.node_moreBtnPanel.active=!0);case"close_more":return void(this.node_moreBtnPanel.active=!1);case"notice":return void cc.director.loadScene("notice")}if(!this.isHelpPrefabLoading){var o=cc.find("Canvas");if(o){var n=this;cc.loader.loadRes(a,function(e,t){e?cc.log("加载帮助Prefab失败, 原因:"+e):t instanceof cc.Prefab?(cc.instantiate(t).parent=o,n.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){n.isHelpPrefabLoading=!1},n)))):cc.log("加载帮助Prefab失败，此实例不是一个Prefab对象")}),this.isHelpPrefabLoading=!0}else cc.log("Game scene找不到Canvas")}},closeAllPanel:function(){var e=cc.find("Canvas/record_layout"),t=cc.find("Canvas/help_layout");null!=e&&e.destroy(),null!=t&&t.destroy()},updateHeadImage:function(i){for(var c=this,e=function(e){var o=c.sp_head_image_list[e];switch(e){case 0:if(console.log("微信头像URL： ",i),null===i)break;cc.loader.load({url:y.default.URL+"login/getPic?u="+i,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}});break;case 1:var t="https://juxinbox.oss-cn-hangzhou.aliyuncs.com/games/head_"+l.default.rand(1,128)+".jpg";console.log("左1头像URL： ",t),cc.loader.load({url:y.default.URL+"login/getPic?u="+t,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}});break;case 2:var a="https://juxinbox.oss-cn-hangzhou.aliyuncs.com/games/head_"+l.default.rand(129,256)+".jpg";console.log("左2头像URL： ",a),cc.loader.load({url:y.default.URL+"login/getPic?u="+a,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}});break;case 3:var n="https://juxinbox.oss-cn-hangzhou.aliyuncs.com/games/head_"+l.default.rand(257,384)+".jpg";console.log("右1头像URL： ",n),cc.loader.load({url:y.default.URL+"login/getPic?u="+n,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}});break;case 4:var r="https://juxinbox.oss-cn-hangzhou.aliyuncs.com/games/head_"+l.default.rand(385,514)+".jpg";console.log("右2头像URL： ",r),cc.loader.load({url:y.default.URL+"login/getPic?u="+r,type:"jpg"},function(e,t){if(e)cc.log("图片加载失败"+e);else{cc.log("图片加载成功");var a=new cc.SpriteFrame(t);o.getComponent(cc.Sprite).spriteFrame=a}})}},t=0;t<this.sp_head_image_list.length;t++)e(t)},sendGetBoundsInfo:function(){l.default.sendHttpRequest("POST","game/getMessage","",function(e,t){e?cc.log("http request error: "+e):this.startLamp(t)}.bind(this))},startLamp:function(e){var t=e.sendNum;if(void 0!==t&&"0"!=t){var a="",o=e.firstName,n=e.firstContent;if(a="<color=#ffffff>恭喜 "+decodeURI(o)+" 获得 </color><color=#ffe329>"+n+" U币</color>",2==t){var r=e.secondName,i=e.secondContent;a+="        <color=#ffffff>恭喜 "+decodeURI(r)+" 获得 </color><color=#ffe329>"+i+" U币</color>"}this.rich_text_bounds.string=a;var c=-this.rich_text_bounds.node.width;this.rich_text_bounds.node.x=470,this.rich_text_bounds.node.runAction(cc.moveTo(15,cc.v2(c,0)))}},stopLamp:function(){},lampController:function(){},update:function(e){this.b_start_update_progress&&(this.n_progress_var+=1e3*e,this.progressBar_timer.progress=this.n_progress_var/3e4)}});t.exports=n,cc._RF.pop()},{"./data/ConstData":"ConstData","./data/GlobalGameData":"GlobalGameData","./tools/Tools":"Tools"}],guide:[function(e,t,a){"use strict";cc._RF.push(t,"95a16a4tdZPVIdLFleFSBZy","guide");var n=o(e("./data/GlobalGameData")),r=o(e("./data/ConstData")),i=o(e("./tools/Tools"));function o(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{layout_step1:{type:cc.Layout,default:null},layout_step2:{type:cc.Layout,default:null},layout_step3:{type:cc.Layout,default:null},layout_step4:{type:cc.Layout,default:null},layout_start_game:{type:cc.Layout,default:null},music_btn:{type:cc.AudioSource,default:null},scroll_view_notice:{type:cc.ScrollView,default:null},node_notice:{type:cc.Node,default:null},rich_text_notice_content:{type:cc.RichText,default:null}},onBridgeReady:function(){console.log("guide.js隐藏tool bar"),WeixinJSBridge.call("showToolbar"),WeixinJSBridge.call("showOptionMenu")},onLoad:function(){if(!r.default.DEBUG&&("MicroMessenger"!=navigator.userAgent.match(/MicroMessenger/i)&&cc.sys.platform==cc.sys.DESKTOP_BROWSER)){alert("请使用微信打开链接");var e=window.open("about:blank","_self");e.opener=null,e.close()}},reviveShare:function(){if(cc.sys.platform!=cc.sys.WECHAT_GAME){var a={},o={},e="currUrl="+window.location.href;i.default.sendHttpRequest("POST","login/toShare",e,function(e,t){e?cc.log("http request error: "+e):(console.log("微信分享config"),wx.config(t),a={title:"来王牌投资，做金牌投资人！",desc:"油滴快人一步，油费步步快~",link:"https://game.juxinbox.com/trump_investment/login/authorizeShareAppMessage",imgUrl:"https://game.juxinbox.com/share.png",trigger:function(e){},success:function(e){},cancel:function(e){},fail:function(e){console.log(e)}},o={title:"来王牌投资，做金牌投资人！",desc:"油滴快人一步，油费步步快~",link:"https://game.juxinbox.com/trump_investment/login/authorizeShareTimeline",imgUrl:"https://game.juxinbox.com/share.png",trigger:function(e){},success:function(e){},cancel:function(e){},fail:function(e){}},wx.ready(function(){console.log("wx.ready"),wx.onMenuShareAppMessage(a),wx.onMenuShareTimeline(o),wx.hideMenuItems({menuList:["menuItem:openWithSafari","menuItem:openWithQQBrowser","menuItem:copyUrl"]})}),wx.error(function(e){}))})}},start:function(){var a=this;if(cc.sys.isBrowser){var e=window.location.href,t="userKey="+e.substring(e.lastIndexOf("userKey=")+"userKey=".length,e.length);i.default.sendHttpRequest("POST","login/getOpenId",t,function(e,t){if(e)return window.location.href=r.default.URL+"login/authorize",void cc.log("http request error: "+e);console.log("openID:"+t.openId),n.default.openID=t.openId,a.reviveShare()})}var o=cc.sys.localStorage.getItem("IsFirstPlay");null===o||"true"===o?(cc.info("IsFirstPlay = "+o+" 弹出引导"),this.layout_step1.node.active=!0):(cc.info("IsFirstPlay = "+o+" 跳过引导"),cc.director.preloadScene("game",function(){cc.log("Next scene preloaded")}),this.layout_start_game.node.active=!0,this.getNotice())},nextBtnClicked:function(e,t){switch(cc.log("点击下一步: "+t),this.music_btn.play(),t){case"1":this.layout_step1.node.active=!1,this.layout_step2.node.active=!0;break;case"2":this.layout_step2.node.active=!1,this.layout_step3.node.active=!0,cc.director.preloadScene("game",function(){cc.log("Next scene preloaded")});break;case"3":this.layout_step3.node.active=!1,this.layout_step4.node.active=!0;break;case"4":this.layout_step4.node.active=!1,this.layout_start_game.node.active=!0,this.getNotice(),cc.sys.localStorage.setItem("IsFirstPlay","false")}},startGameClicked:function(){this.music_btn.play();var e="openId="+n.default.openID;i.default.sendHttpRequest("POST","login/searchUser",e,function(e,t){e?cc.log("http request error: "+e):(n.default.oli_var=Number(t.oilNum),n.default.locked_oli_var=Number(t.uCoin),n.default.headImgUrl=t.headImgUrl,console.log(n.default.headImgUrl),cc.director.loadScene("game"))})},onNoticeOkClicked:function(){cc.log("公告时间戳： "+n.default.game_notice_time_stamp),cc.sys.localStorage.setItem("noticeTimeStamp",n.default.game_notice_time_stamp),this.node_notice.active=!1},getNotice:function(){var o=cc.sys.localStorage.getItem("noticeTimeStamp");i.default.sendHttpRequest("POST","game/getNotice","",function(e,t){if(e)cc.log("获取公告失败-> http request error: "+e);else if(n.default.game_notice_text=t.content,o!=t.date){n.default.game_notice_time_stamp=t.date,this.rich_text_notice_content.string=n.default.game_notice_text;var a=this.rich_text_notice_content.node.height;this.scroll_view_notice.content.height=a+60,this.node_notice.active=!0,cc.log("弹出公告")}else cc.log("公告已获取过，不弹出")}.bind(this))},webViewCallback:function(e,t,a){cc.log("eventType:"+t)}}),cc._RF.pop()},{"./data/ConstData":"ConstData","./data/GlobalGameData":"GlobalGameData","./tools/Tools":"Tools"}],help_layout:[function(e,t,a){"use strict";cc._RF.push(t,"4ac7atUFtRPi74r/R/I8p/C","help_layout"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBackButtonClicked:function(e,t){cc.director.loadScene("game")}}),cc._RF.pop()},{}],notice:[function(e,t,a){"use strict";cc._RF.push(t,"77d58a7lTlAUrRfBa4PfdWr","notice");var o,n=e("./data/GlobalGameData"),r=(o=n)&&o.__esModule?o:{default:o};cc.Class({extends:cc.Component,properties:{richText_content:{type:cc.Label,default:null},scrollView_text:{type:cc.ScrollView,default:null}},loadText:function(){this.richText_content.string=r.default.game_notice_text;var e=this.richText_content.node.height;this.scrollView_text.content.height=e},start:function(){this.loadText()},onBackButtonClicked:function(e,t){cc.director.loadScene("game")}}),cc._RF.pop()},{"./data/GlobalGameData":"GlobalGameData"}],record_item:[function(e,t,a){"use strict";cc._RF.push(t,"918a1h08+9ErIhltSOKxGoM","record_item"),cc.Class({extends:cc.Component,properties:{lb_month:{type:cc.Label,default:null},lb_hot:{type:cc.Label,default:null},sp_market:{type:cc.Sprite,default:null},sp_auto_car:{type:cc.Sprite,default:null},sp_manual_car:{type:cc.Sprite,default:null},sp_backGround:{type:cc.Sprite,default:null},spriteFrame_suv:{type:cc.SpriteFrame,default:null},spriteFrame_car:{type:cc.SpriteFrame,default:null}},start:function(){},updateItem:function(e){this.lb_month.string=e.order.toString(),e.order%2==0?this.sp_backGround.node.active=!0:this.sp_backGround.node.active=!1,"car"===e.marketType?this.sp_market.spriteFrame=this.spriteFrame_car:this.sp_market.spriteFrame=this.spriteFrame_suv,"auto"==e.type?this.sp_auto_car.node.active=!0:this.sp_manual_car.node.active=!0,"保护基金"==e.winCar&&(this.sp_market.spriteFrame=null,this.sp_auto_car.node.active=!1,this.sp_manual_car.node.active=!1),this.lb_hot.string=e.winCar}}),cc._RF.pop()},{}],record_layout:[function(e,t,a){"use strict";cc._RF.push(t,"d6bb2JlEutIprWg9s12uf9f","record_layout");var o=r(e("./data/GlobalGameData")),n=r(e("./tools/Tools"));function r(e){return e&&e.__esModule?e:{default:e}}cc.Class({extends:cc.Component,properties:{myScrollView:{type:cc.ScrollView,default:null},record_item:{type:cc.Node,default:null}},start:function(){var e="openId="+o.default.openID,a=this;n.default.sendHttpRequest("POST","game/getTrend",e,function(e,t){e?cc.log("http request error: "+e):a.createItem(t)})},onBtnClicked:function(e,t){var a=cc.find("Canvas");this._gameObj=a.getComponent("game"),this._gameObj.playBtnSound(),this.node.destroy()},createItem:function(e){var t=0;for(var a in e)if(e.hasOwnProperty(a)){var o=e[a],n=cc.instantiate(this.record_item);n.active=!0,n.setPositionX(0),this.myScrollView.content.addChild(n),n.getComponent("record_item").updateItem(o),t+=n.height}this.myScrollView.content.height=t}}),cc._RF.pop()},{"./data/GlobalGameData":"GlobalGameData","./tools/Tools":"Tools"}]},{},["activity","car_btn","ConstData","GlobalGameData","game","guide","help_layout","notice","record_item","record_layout","Tools","gameTips"]);