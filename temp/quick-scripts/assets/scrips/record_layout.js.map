{"version":3,"sources":["record_layout.js"],"names":["cc","Class","extends","Component","properties","myScrollView","type","ScrollView","default","record_item","Node","start","postData","GlobalGameData","openID","self","Tools","sendHttpRequest","err","resp","createItem","log","onBtnClicked","event","eventCustomData","rootNode","find","_gameObj","getComponent","playBtnSound","node","destroy","data","totalHeight","key","hasOwnProperty","element","item","instantiate","active","setPositionX","content","addChild","updateItem","height"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBACA;AACIC,kBAAMN,GAAGO,UADb;AAEIC,qBAAS;AAFb,SAFQ;AAMRC,qBACA;AACIH,kBAAMN,GAAGU,IADb;AAEIF,qBAAS;AAFb;AAPQ,KAHP;;AAgBL;;AAEA;;AAEAG,SApBK,mBAoBG;AACJ,YAAIC,WAAW,YAAYC,yBAAeC,MAA1C;AACA,YAAIC,OAAO,IAAX;AACAC,wBAAMC,eAAN,CAAsB,MAAtB,EAA8B,eAA9B,EAA+CL,QAA/C,EAAyD,UAAUM,GAAV,EAAeC,IAAf,EAAqB;AAC1E,gBAAI,CAACD,GAAL,EAAU;AACNH,qBAAKK,UAAL,CAAgBD,IAAhB;AACH,aAFD,MAGK;AACDnB,mBAAGqB,GAAH,CAAO,yBAAyBH,GAAhC;AACH;AACJ,SAPD;AAQH,KA/BI;;AAgCLI,kBAAc,sBAAUC,KAAV,EAAiBC,eAAjB,EAAkC;AAC5C,YAAIC,WAAWzB,GAAG0B,IAAH,CAAQ,QAAR,CAAf;AACA,aAAKC,QAAL,GAAgBF,SAASG,YAAT,CAAsB,MAAtB,CAAhB;AACA,aAAKD,QAAL,CAAcE,YAAd;AACA,aAAKC,IAAL,CAAUC,OAAV;AACH,KArCI;AAsCLX,cAtCK,sBAsCMY,IAtCN,EAsCW;AACZ,YAAIC,cAAc,CAAlB;AACA,aAAK,IAAMC,GAAX,IAAkBF,IAAlB,EAAwB;AACpB,gBAAIA,KAAKG,cAAL,CAAoBD,GAApB,CAAJ,EAA8B;AAC1B,oBAAIE,UAAUJ,KAAKE,GAAL,CAAd;AACA,oBAAIG,OAAOrC,GAAGsC,WAAH,CAAe,KAAK7B,WAApB,CAAX;AACA4B,qBAAKE,MAAL,GAAc,IAAd;AACAF,qBAAKG,YAAL,CAAkB,CAAlB;AACA,qBAAKnC,YAAL,CAAkBoC,OAAlB,CAA0BC,QAA1B,CAAmCL,IAAnC;AACAA,qBAAKT,YAAL,CAAkB,aAAlB,EAAiCe,UAAjC,CAA4CP,OAA5C;AACAH,+BAAeI,KAAKO,MAApB;AACH;AACJ;AACD,aAAKvC,YAAL,CAAkBoC,OAAlB,CAA0BG,MAA1B,GAAmCX,WAAnC;AACH;AACD;;AArDK,CAAT","file":"record_layout.js","sourceRoot":"..\\..\\..\\..\\assets\\scrips","sourcesContent":["import GlobalGameData from \"./data/GlobalGameData\";\r\nimport Tools from \"./tools/Tools\";\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        myScrollView:\r\n        {\r\n            type: cc.ScrollView,\r\n            default: null\r\n        },\r\n        record_item:\r\n        {\r\n            type: cc.Node,\r\n            default: null\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        var postData = \"openId=\" + GlobalGameData.openID;\r\n        var self = this;\r\n        Tools.sendHttpRequest(\"POST\", \"game/getTrend\", postData, function (err, resp) {\r\n            if (!err) {\r\n                self.createItem(resp);\r\n            }\r\n            else {\r\n                cc.log(\"http request error: \" + err);\r\n            }\r\n        });\r\n    },\r\n    onBtnClicked: function (event, eventCustomData) {\r\n        var rootNode = cc.find(\"Canvas\");\r\n        this._gameObj = rootNode.getComponent(\"game\");\r\n        this._gameObj.playBtnSound();\r\n        this.node.destroy();\r\n    },\r\n    createItem(data){\r\n        var totalHeight = 0;\r\n        for (const key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                let element = data[key];\r\n                let item = cc.instantiate(this.record_item);\r\n                item.active = true;\r\n                item.setPositionX(0);\r\n                this.myScrollView.content.addChild(item);\r\n                item.getComponent('record_item').updateItem(element);\r\n                totalHeight += item.height;\r\n            }\r\n        }\r\n        this.myScrollView.content.height = totalHeight;\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}